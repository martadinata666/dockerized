name: Installation Test

# Need manually created
# DOCKERHUB_USERNAME
# DOCKERHUB_TOKEN
# DOCKERHUB_IMAGE_NAME

on:
  push:
    branches: [ 'dockerfile-debian' ] #rolling build on develop only
    tags: 'v*' #tag for specific release v1.0.2,or anytag, start with v
  pull_request:
    branches: [ 'main' ] #build test on main, not pushing
  workflow_dispatch:

jobs:
  install:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        version: ["3.9","3.10","3.11"]
    container:
      image: python:${{ matrix.version  }}
    permissions:
      contents: read
      packages: write
      # This is used to complete the identity challenge
      # with sigstore/fulcio when running outside of PRs.
      id-token: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
      - name: Install yacron
        run: pip3 install yacron


